This demonstrates using Cloudflare's [cfssl](https://github.com/cloudflare/cfssl) to easily generate certificates for an etcd cluster.
本文档展示通过使用Cloudflares的开源项目[cfssl](https://github.com/cloudflare/cfssl) 来生成etcd集群证书

Defaults generate an ECDSA-384 root and leaf certificates for `localhost`. etcd nodes will use the same certificates for both sides of mutual authentication, but won't require client certs for non-peer clients.
默认生成使用ECDSA-384签名算法的根证书和localhost的leaf 证书。 etcd节点将使用相同的证书
**Instructions**

1. Install git, go, and make
1. 安装工具; git、go、make
2. 修改 config/req-csr.json - 替换Cluster集群IP地址, 注意```127.0.0.1```本地地址要在IP列表里:
```json
Example:
{
  "CN": "etcd",
  "hosts": [
    "192.168.31.17",
    "192.168.31.18",
    "192.168.31.19",
    "127.0.0.1"
  ],
  "key": {
    "algo": "ecdsa",
    "size": 384
  },
  "names": [
    {
      "O": "autogenerated",
      "OU": "etcd cluster",
      "L": "the internet"
    }
  ]
}
```
3. Set the following environment variables subsituting your IP address:
```bash
export infra0={IP-0}
export infra1={IP-1}
export infra2={IP-2}
```
4. Run `make` to generate the certs


export infra0=172.19.56.72
export infra1=172.19.56.71
export infra2=172.19.56.73


101.132.161.179 
scp 
139.196.92.77
101.132.129.249


ssh  -i ~/certs/etcd-temp.pem  root@101.132.161.179   "date"


```
etcd --name infra0 --initial-advertise-peer-urls https://10.0.1.10:2380 \
  --listen-peer-urls https://10.0.1.10:2380 \
  --listen-client-urls https://10.0.1.10:2379,https://127.0.0.1:2379 \
  --advertise-client-urls https://10.0.1.10:2379 \
  --initial-cluster-token etcd-cluster-1 \
  --initial-cluster infra0=https://10.0.1.10:2380,infra1=https://10.0.1.11:2380,infra2=https://10.0.1.12:2380 \
  --initial-cluster-state new \
  --client-cert-auth --trusted-ca-file=/path/to/ca-client.crt \
  --cert-file=/path/to/infra0-client.crt --key-file=/path/to/infra0-client.key \
  --peer-client-cert-auth --peer-trusted-ca-file=ca-peer.crt \
  --peer-cert-file=/path/to/infra0-peer.crt --peer-key-file=/path/to/infra0-peer.key

 ``` 